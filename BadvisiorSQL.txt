CREATE TABLE TypeUtilisateur(
   idTypeUtilisateur INT NOT NULL,
   idUtilisateur INT NOT NULL,
   CONSTRAINT PK_idTypeUtilisateur_idUtilisateur PRIMARY KEY(idTypeUtilisateur, idUtilisateur),
   CONSTRAINT FK_idTypeUtilisateur_TypeUtilisateur FOREIGN KEY idUtilisateur REFERENCES Utilisateur(idUtilisateur)
);

CREATE TABLE TypeLevure(
   idLevure INT,
   nomLevure VARCHAR(50) NOT NULL,
   CONSTRAINT PK_idLevure PRIMARY KEY(idLevure)
);

CREATE TABLE TypeMalt(
   idMalt INT,
   nomMalt VARCHAR(50) NOT NULL,
   CONSTRAINT PK_idMalt PRIMARY KEY(idMalt)
);

CREATE TABLE TypeHoublon(
   idHoublon INT,
   nomHoublon VARCHAR(50) NOT NULL,
   CONSTRAINT PK_idHoublon PRIMARY KEY(idHoublon)
);

CREATE TABLE Biere(
   idBiere INT,
   nomBiere VARCHAR(50) NOT NULL,
   tauxAlcool DECIMAL(5,2) NOT NULL,
   idMalt INT,
   idHoublon INT,
   idLevure INT,
	
   CONSTRAINT PK_idBiere PRIMARY KEY (idBiere),
   CONSTRAINT FK_idMalt FOREIGN KEY (idMalt) REFERENCES TypeMalt(idMalt) ON DELETE CASCADE,
   CONSTRAINT FK_idHoublon FOREIGN KEY (idHoublon) REFERENCES TypeHoublon(idHoublon) ON DELETE CASCADE,
   CONSTRAINT FK_idLevure FOREIGN KEY (idLevure) REFERENCES TypeLevure(idLevure) ON DELETE CASCADE
);

CREATE TABLE Utilisateur(
   idUtilisateur INT,
   nomUtilisateur VARCHAR(50) NOT NULL,
   passwordUtilsateur VARCHAR(50),
   typeUtilisateur INT,
   idTypeUtilisateur INT NOT NULL,
   CONSTRAINT PK_idUtilisateur PRIMARY KEY (idUtilisateur),
   CONSTRAINT FK_typeUtilisateur FOREIGN KEY(typeUtilisateur) REFERENCES TypeUtilisateur(idTypeUtilisateur)
);

CREATE TABLE Note(
   idBiere INT,
   idUtilisateur INT,
   noteValeur INT NOT NULL,

   CONSTRAINT PK_idBiere_idUtilisateur PRIMARY KEY(idBiere, idUtilisateur),
   CONSTRAINT FK_idBiere FOREIGN KEY(idBiere) REFERENCES Biere(idBiere) ON DELETE CASCADE,
   CONSTRAINT FK_idUtilisateur FOREIGN KEY(idUtilisateur) REFERENCES Utilisateur(idUtilisateur) ON DELETE CASCADE
);

CREATE TABLE Recommande(
   idBiere INT,
   idUtilisateur INT,
   CONSTRAINT PK_idBiere_idUtilisateur_recommande PRIMARY KEY(idBiere, idUtilisateur),
   CONSTRAINT FK_idBiere_recommande FOREIGN KEY(idBiere) REFERENCES Biere(idBiere) ON DELETE CASCADE,
   CONSTRAINT FK_idUtilisateur_recommande FOREIGN KEY(idUtilisateur) REFERENCes Utilisateur(idUtilisateur) ON DELETE CASCADE
);
