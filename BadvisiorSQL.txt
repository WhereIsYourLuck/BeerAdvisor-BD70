CREATE TABLE TypeUtilisateur(
   idTypeUtilisateur INT NOT NULL,
   idUtilisateur INT NOT NULL
);

CREATE TABLE TypeLevure(
   idLevure INT,
   nomLevure VARCHAR(50) NOT NULL
);

CREATE TABLE TypeMalt(
   idMalt INT,
   nomMalt VARCHAR(50) NOT NULL
);

CREATE TABLE TypeHoublon(
   idHoublon INT,
   nomHoublon VARCHAR(50) NOT NULL
);

CREATE TABLE Biere(
   idBiere INT,
   nomBiere VARCHAR(50) NOT NULL,
   tauxAlcool DECIMAL(5,2) NOT NULL,
   idMalt INT,
   idHoublon INT,
   idLevure INT
);

CREATE TABLE Utilisateur(
   idUtilisateur INT,
   nomUtilisateur VARCHAR(50) NOT NULL,
   passwordUtilsateur VARCHAR(50),
   typeUtilisateur INT,
   idTypeUtilisateur INT NOT NULL
);

CREATE TABLE Note(
   idBiere INT,
   idUtilisateur INT,
   noteValeur INT NOT NULL
);

CREATE TABLE Recommande(
   idBiere INT,
   idUtilisateur INT
);

ALTER TABLE TypeUtilisateur ADD CONSTRAINT PK_idTypeUtilisateur_idUtilisateur PRIMARY KEY(idTypeUtilisateur, idUtilisateur);
ALTER TABLE TypeHoublon ADD CONSTRAINT PK_idHoublon PRIMARY KEY(idHoublon);
ALTER TABLE TypeMalt ADD CONSTRAINT PK_idMalt PRIMARY KEY(idMalt);
ALTER TABLE TypeLevure ADD CONSTRAINT PK_idLevure PRIMARY KEY(idLevure);
ALTER TABLE BIERE ADD CONSTRAINT PK_idBiere PRIMARY KEY (idBiere);
ALTER TABLE Utilisateur ADD CONSTRAINT PK_idUtilisateur PRIMARY KEY (idUtilisateur);
ALTER TABLE Note ADD CONSTRAINT PK_idBiere_idUtilisateur PRIMARY KEY(idBiere, idUtilisateur);
ALTER TABLE Recommande ADD CONSTRAINT PK_idBiere_idUtilisateur_recommande PRIMARY KEY(idBiere, idUtilisateur);

ALTER TABLE Biere ADD CONSTRAINT FK_idMalt FOREIGN KEY (idMalt) REFERENCES TypeMalt(idMalt) ON DELETE CASCADE;
ALTER TABLE Biere ADD CONSTRAINT FK_idHoublon FOREIGN KEY (idHoublon) REFERENCES TypeHoublon(idHoublon) ON DELETE CASCADE;
ALTER TABLE Biere ADD CONSTRAINT FK_idLevure FOREIGN KEY (idLevure) REFERENCES TypeLevure(idLevure) ON DELETE CASCADE;


ALTER TABLE Utilisateur ADD CONSTRAINT FK_typeUtilisateur FOREIGN KEY(typeUtilisateur) REFERENCES TypeUtilisateur(idTypeUtilisateur);

ALTER TABLE Note ADD CONSTRAINT FK_idBiere FOREIGN KEY(idBiere) REFERENCES Biere(idBiere) ON DELETE CASCADE;
ALTER TABLE Note ADD CONSTRAINT FK_idUtilisateur FOREIGN KEY(idUtilisateur) REFERENCES Utilisateur(idUtilisateur) ON DELETE CASCADE;

ALTER TABLE Recommande ADD CONSTRAINT FK_idBiere_recommande FOREIGN KEY(idBiere) REFERENCES Biere(idBiere) ON DELETE CASCADE;
ALTER TABLE Recommande ADD CONSTRAINT FK_idUtilisateur_recommande FOREIGN KEY(idUtilisateur) REFERENCes Utilisateur(idUtilisateur) ON DELETE CASCADE;